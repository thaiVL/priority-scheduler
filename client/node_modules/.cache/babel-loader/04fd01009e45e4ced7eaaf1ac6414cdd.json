{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\Thai\\\\Code\\\\CMPT370Project\\\\client\\\\src\\\\components\\\\LoginForm.js\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginForm(_ref) {\n  _s();\n\n  let {\n    auth\n  } = _ref;\n  const [detail, setDetail] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [err, setErr] = useState(null);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    var status;\n    fetch(\"/login\", {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        email: detail.email,\n        password: detail.password\n      })\n    }).then(res => {\n      // console.log(res)\n      status = res.status;\n      return res.json();\n    }).then(data => {\n      if (status !== 200) {\n        console.log(\"err occured\");\n        console.log(data);\n        setErr(data);\n      } else {\n        /////// TEST TOKEN //////////\n        fetch(\"/login/test\", {\n          headers: {\n            \"authorization\": `Bearer ${data}`\n          }\n        }).then(response => response.json()); // .then(data => console.log(\"Test message\", data));\n\n        localStorage.setItem(\"token\", data); // STORAGE HAS BEEN SET, NEED TO RETRIEVE UPON LOAD\n\n        auth(data); /////// TEST TOKEN ////////////\n      }\n    });\n  }\n\n  useEffect(() => {\n    console.log(\"Rerendered Page\");\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container login\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            placeholder: \"johndoe@email.com\",\n            onChange: e => setDetail({ ...detail,\n              email: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"pass\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            name: \"pass\",\n            onChange: e => setDetail({ ...detail,\n              password: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginForm, \"a9VdDiJx3g0oQYVl9WOnLh7gJC4=\");\n\n_c = LoginForm;\nexport default LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["D:/Users/Thai/Code/CMPT370Project/client/src/components/LoginForm.js"],"names":["useEffect","useState","LoginForm","auth","detail","setDetail","email","password","err","setErr","handleSubmit","e","preventDefault","status","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","response","localStorage","setItem","target","value"],"mappings":"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","sourcesContent":["import { useEffect, useState} from \"react\";\r\n\r\nfunction LoginForm({auth}){\r\n\r\n    const [detail, setDetail] = useState({email: \"\", password: \"\"});\r\n    const [err, setErr] = useState(null);\r\n    \r\n    function handleSubmit(e){\r\n        e.preventDefault();\r\n        var status;\r\n\r\n        fetch(\"/login\", {\r\n          method: \"POST\",\r\n          headers:{\r\n            \"Accept\": \"application/json\",\r\n            \"Content-Type\": \"application/json\"\r\n          },\r\n          body: JSON.stringify({email: detail.email, password: detail.password})\r\n        })\r\n        .then(res => {\r\n            // console.log(res)\r\n            status = res.status;\r\n            return res.json();\r\n        })\r\n        .then(data =>{\r\n            if(status !== 200){\r\n                console.log(\"err occured\");\r\n                console.log(data);\r\n                setErr(data);\r\n            }\r\n            else{\r\n                /////// TEST TOKEN //////////\r\n                fetch(\"/login/test\", {\r\n                    headers: {\r\n                        \"authorization\": `Bearer ${data}`\r\n                    }\r\n                })\r\n                .then(response => response.json())\r\n                // .then(data => console.log(\"Test message\", data));\r\n                localStorage.setItem(\"token\", data); // STORAGE HAS BEEN SET, NEED TO RETRIEVE UPON LOAD\r\n                auth(data);\r\n\r\n                /////// TEST TOKEN ////////////\r\n\r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        console.log(\"Rerendered Page\");\r\n        \r\n    }, [])\r\n\r\n    \r\n\r\n    return(\r\n        <div className=\"container login\">\r\n            <h1>Login</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className = \"form-inner\">\r\n                    {/* Email */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"email\">Email</label>\r\n                        <input type=\"email\" name=\"email\" placeholder=\"johndoe@email.com\"\r\n                        onChange={(e) => setDetail({...detail, email: e.target.value})}></input>\r\n                    </div>\r\n                    {/* Password */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"pass\">Password</label>\r\n                        <input type=\"password\" name=\"pass\"\r\n                        onChange={(e) => setDetail({...detail, password: e.target.value})}></input>\r\n                    </div>\r\n                </div>\r\n                <button type=\"submit\" className=\"btn btn-primary\">Login</button>\r\n            </form>\r\n        </div>\r\n\r\n    )\r\n\r\n}\r\n\r\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}