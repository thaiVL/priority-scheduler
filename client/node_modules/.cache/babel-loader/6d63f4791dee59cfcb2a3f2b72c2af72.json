{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\Thai\\\\Code\\\\CMPT370Project\\\\client\\\\src\\\\pages\\\\Signup.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { testToken } from '../service/tokenService';\nimport * as ROUTES from '../constants/routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Signup(_ref) {\n  _s();\n\n  let {\n    token,\n    setToken\n  } = _ref;\n  const [detail, setDetail] = useState({\n    email: \"\",\n    password: \"\",\n    passwordConfirm: \"\",\n    name: \"\",\n    studentID: \"\",\n    school: \"\"\n  });\n  const [err, setErr] = useState(null);\n  const history = useHistory();\n\n  const handleSignup = async event => {\n    event.preventDefault();\n    sendRegisterData(detail);\n  };\n\n  useEffect(() => {\n    document.title = 'Signup - Priori';\n\n    if (token) {\n      testToken(token.token_string).then(data => {\n        if (data) {\n          history.push(ROUTES.DASHBOARD);\n        }\n      });\n    }\n  }, []);\n\n  function sendRegisterData(obj) {\n    var status;\n    fetch(\"/register\", {\n      method: \"POST\",\n      headers: {\n        \"Accept\": \"application/json\",\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(obj)\n    }).then(res => {\n      status = res.status;\n      return res.json();\n    }).then(data => {\n      if (status !== 200) {\n        console.log(data[0].msg);\n        setErr(data[0].msg);\n      } else {\n        // redirect to successful page\n        console.log(\"Account created!\");\n        history.push(ROUTES.DASHBOARD);\n      }\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"header pink\",\n        children: \"Priori\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Start making you a priority\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this), err && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"red\",\n        children: err\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSignup,\n        method: \"POST\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Your name?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter name\",\n          onChange: e => setDetail({ ...detail,\n            name: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Your university?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter university name\",\n          onChange: e => setDetail({ ...detail,\n            school: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Your student ID?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter your student number\",\n          onChange: e => setDetail({ ...detail,\n            studentID: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Your email?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter Email\",\n          onChange: e => setDetail({ ...detail,\n            email: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Enter a password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Enter Password\",\n          onChange: e => setDetail({ ...detail,\n            password: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: \"Confirm your password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Enter Password\",\n          onChange: e => setDetail({ ...detail,\n            passwordConfirm: e.target.value\n          }),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          type: \"submit\",\n          children: \"Sign Up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login_line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"directing\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Have an account?\", /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"underline_bold\",\n              href: ROUTES.LOGIN,\n              children: \" Log in\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Signup, \"8L1FycRKrnCDV8K6cHVjGSKJGO0=\", false, function () {\n  return [useHistory];\n});\n\n_c = Signup;\nexport default Signup;\n\nvar _c;\n\n$RefreshReg$(_c, \"Signup\");","map":{"version":3,"sources":["D:/Users/Thai/Code/CMPT370Project/client/src/pages/Signup.js"],"names":["useState","useEffect","useHistory","testToken","ROUTES","Signup","token","setToken","detail","setDetail","email","password","passwordConfirm","name","studentID","school","err","setErr","history","handleSignup","event","preventDefault","sendRegisterData","document","title","token_string","then","data","push","DASHBOARD","obj","status","fetch","method","headers","body","JSON","stringify","res","json","console","log","msg","e","target","value","LOGIN"],"mappings":"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","sourcesContent":["import {useState, useEffect} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport { testToken } from '../service/tokenService';\r\nimport * as ROUTES from '../constants/routes';\r\n\r\nfunction Signup({token, setToken}) {\r\n    const [detail, setDetail] = useState({email: \"\", password: \"\", passwordConfirm: \"\",\r\n                                          name: \"\", studentID: \"\", school: \"\"});\r\n    const [err, setErr] = useState(null);\r\n\r\n    const history = useHistory();\r\n    const handleSignup = async (event) => {\r\n            event.preventDefault();\r\n            sendRegisterData(detail);\r\n            };\r\n\r\n    useEffect(() => {\r\n        document.title = 'Signup - Priori';\r\n        if (token){\r\n            testToken(token.token_string)\r\n            .then(data =>{\r\n                if (data){\r\n                    history.push(ROUTES.DASHBOARD);\r\n                }\r\n            });\r\n        }\r\n    }, []);\r\n\r\n    function sendRegisterData(obj){\r\n        var status;\r\n        fetch(\"/register\", {\r\n          method: \"POST\",\r\n          headers:{\r\n            \"Accept\": \"application/json\",\r\n            \"Content-Type\": \"application/json\" \r\n          },\r\n          body: JSON.stringify(obj)\r\n        })\r\n        .then(res => {\r\n            status = res.status;\r\n            return res.json();\r\n        })\r\n        .then((data) => {\r\n            if(status !== 200){\r\n                console.log(data[0].msg);\r\n                setErr(data[0].msg);\r\n            }\r\n            else{\r\n                // redirect to successful page\r\n                console.log(\"Account created!\");\r\n                history.push(ROUTES.DASHBOARD);\r\n            }\r\n        })\r\n        \r\n    }\r\n\r\n     return (\r\n    <div className=\"App\">\r\n        <div className=\"App-header\">\r\n            <h1 className=\"header pink\">Priori</h1>\r\n            <h1>Start making you a priority</h1>\r\n            <br/>\r\n            {err && <p className=\"red\">{err}</p>} \r\n            <br/>\r\n            <form onSubmit={handleSignup} method=\"POST\"> \r\n                <b>Your name?</b>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Enter name\" \r\n                        onChange={(e) => setDetail({...detail, name: e.target.value})}\r\n                        required/>\r\n            \r\n                <b>Your university?</b>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Enter university name\" \r\n                        onChange={(e) => setDetail({...detail, school: e.target.value})}\r\n                        required/>\r\n                \r\n                <b>Your student ID?</b>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Enter your student number\" \r\n                        onChange={(e) => setDetail({...detail, studentID: e.target.value})}\r\n                        required/>\r\n\r\n                <b>Your email?</b>\r\n                    <input \r\n                        type=\"text\" \r\n                        placeholder=\"Enter Email\"  \r\n                        onChange={(e) => setDetail({...detail, email: e.target.value})}\r\n                        required/>\r\n\r\n                <b>Enter a password</b>\r\n                    <input \r\n                        type=\"password\" \r\n                        placeholder=\"Enter Password\"  \r\n                        onChange={(e) => setDetail({...detail, password: e.target.value})}\r\n                        required/>\r\n\r\n                <b>Confirm your password</b>\r\n                    <input \r\n                        type=\"password\" \r\n                        placeholder=\"Enter Password\"  \r\n                        onChange={(e) => setDetail({...detail, passwordConfirm: e.target.value})}\r\n                        required/>\r\n\r\n                <button className=\"button\" type=\"submit\">Sign Up</button>\r\n                <div className=\"login_line\"/>\r\n            </form>\r\n            \r\n            <form className=\"directing\">\r\n            <p type=\"submit\">\r\n                <span>\r\n                    Have an account? \r\n                    <a className=\"underline_bold\" href={ROUTES.LOGIN}> Log in</a>\r\n                    .\r\n                </span>\r\n            </p>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    );\r\n }\r\n\r\n export default Signup;"]},"metadata":{},"sourceType":"module"}