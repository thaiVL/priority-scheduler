{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\Thai\\\\Code\\\\CMPT370Project\\\\client\\\\src\\\\pages\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport * as ROUTES from '../constants/routes';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const history = useHistory();\n\n  const handleLogin = async event => {\n    event.preventDefault();\n\n    try {\n      //// post /auth from the server\n      history.push(ROUTES.DASHBOARD);\n      fetch(\"/login\", {\n        method: \"POST\",\n        headers: {\n          \"Accept\": \"application/json\",\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: detail.email,\n          password: detail.password\n        })\n      }).then(res => {\n        // console.log(res)\n        status = res.status;\n        return res.json();\n      }).then(data => {\n        if (status !== 200) {\n          console.log(\"err occured\");\n          console.log(data);\n          setErr(data);\n        } else {\n          /////// TEST TOKEN //////////\n          fetch(\"/login/test\", {\n            headers: {\n              \"authorization\": `Bearer ${data}`\n            }\n          }).then(response => response.json()); // .then(data => console.log(\"Test message\", data));\n\n          localStorage.setItem(\"token\", data); // STORAGE HAS BEEN SET, NEED TO RETRIEVE UPON LOAD\n\n          auth(data); /////// TEST TOKEN ////////////\n        }\n      });\n    } catch (error) {\n      setEmailAddress('');\n      setPassword('');\n      setError(error.message);\n    }\n  };\n\n  const [emailAddress, setEmailAddress] = useState('');\n  const [password, setPassword] = useState('');\n  const [remember, setRemember] = useState(false);\n  const [error, setError] = useState('');\n  useEffect(() => {\n    document.title = 'Login - Priori';\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"header pink\",\n        children: \"Priori\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"red\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleLogin,\n        method: \"POST\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter Email\",\n          value: emailAddress,\n          onChange: _ref => {\n            let {\n              target\n            } = _ref;\n            return setEmailAddress(target.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          placeholder: \"Enter Password\",\n          value: password,\n          onChange: _ref2 => {\n            let {\n              target\n            } = _ref2;\n            return setPassword(target.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button\",\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login_line\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"directing\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          type: \"submit\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"Don't have an account?\", /*#__PURE__*/_jsxDEV(\"a\", {\n              className: \"underline_bold\",\n              href: ROUTES.SIGN_UP,\n              children: \" Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 29\n            }, this), \".\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"XYktcOqysR9AwtuXEE58+K9zXac=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["D:/Users/Thai/Code/CMPT370Project/client/src/pages/Login.js"],"names":["useState","useEffect","useHistory","ROUTES","Login","history","handleLogin","event","preventDefault","push","DASHBOARD","fetch","method","headers","body","JSON","stringify","email","detail","password","then","res","status","json","data","console","log","setErr","response","localStorage","setItem","auth","error","setEmailAddress","setPassword","setError","message","emailAddress","remember","setRemember","document","title","target","value","SIGN_UP"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport * as ROUTES from '../constants/routes';\r\n\r\n\r\nfunction Login() {\r\n    const history = useHistory();\r\n    const handleLogin = async (event) => {\r\n        event.preventDefault();\r\n        try {\r\n            //// post /auth from the server\r\n            history.push(ROUTES.DASHBOARD);\r\n            fetch(\"/login\", {\r\n                method: \"POST\",\r\n                headers:{\r\n                  \"Accept\": \"application/json\",\r\n                  \"Content-Type\": \"application/json\"\r\n                },\r\n                body: JSON.stringify({email: detail.email, password: detail.password})\r\n              })\r\n              .then(res => {\r\n                  // console.log(res)\r\n                  status = res.status;\r\n                  return res.json();\r\n              })\r\n              .then(data =>{\r\n                  if(status !== 200){\r\n                      console.log(\"err occured\");\r\n                      console.log(data);\r\n                      setErr(data);\r\n                  }\r\n                  else{\r\n                      /////// TEST TOKEN //////////\r\n                      fetch(\"/login/test\", {\r\n                          headers: {\r\n                              \"authorization\": `Bearer ${data}`\r\n                          }\r\n                      })\r\n                      .then(response => response.json())\r\n                      // .then(data => console.log(\"Test message\", data));\r\n                      localStorage.setItem(\"token\", data); // STORAGE HAS BEEN SET, NEED TO RETRIEVE UPON LOAD\r\n                      auth(data);\r\n      \r\n                      /////// TEST TOKEN ////////////\r\n      \r\n                  }\r\n              })\r\n      \r\n        } catch (error) {\r\n            setEmailAddress('');\r\n            setPassword('');\r\n            setError(error.message);\r\n        }\r\n    };\r\n\r\n    const [emailAddress, setEmailAddress] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [remember, setRemember] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        document.title = 'Login - Priori';\r\n    }, []);\r\n    return (\r\n        <div className=\"App\">\r\n            <div className=\"App-header\">\r\n                <h1 className=\"header pink\">Priori</h1>\r\n                <br />\r\n                <br />\r\n                {error && <p className=\"red\">{error}</p>}\r\n                <form onSubmit={handleLogin} method=\"POST\">\r\n                    <label><b>Email</b></label>\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Enter Email\"\r\n                        value={emailAddress}\r\n                        onChange={({ target }) => setEmailAddress(target.value)}\r\n                        required />\r\n\r\n                    <label><b>Password</b></label>\r\n                    <input\r\n                        type=\"password\"\r\n                        placeholder=\"Enter Password\"\r\n                        value={password}\r\n                        onChange={({ target }) => setPassword(target.value)}\r\n                        required />\r\n                    <button className=\"button\" type=\"submit\">Login</button>\r\n                    <div className=\"login_line\" />\r\n                </form>\r\n                <form className=\"directing\">\r\n                    <p type=\"submit\">\r\n                        <span>\r\n                            Don't have an account? \r\n                            <a className=\"underline_bold\" href={ROUTES.SIGN_UP}> Sign up</a>\r\n                            .\r\n                        </span>\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}